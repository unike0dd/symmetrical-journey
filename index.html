
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elite Cafeteria Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@700&family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: dark;
        --bg-0: #0e0f12;
        --bg-1: #14171c;
        --surface-1: #1a1f26;
        --surface-2: #202834;
        --surface-3: #2a3442;
        --border: #2f3a49;
        --accent: #d86a55;
        --accent-pressed: #c35c4b;
        --text-primary: #f3eee6;
        --text-secondary: #c8c0b6;
        --chip-bg: #1a1f26;
        --chip-active: rgba(216, 106, 85, 0.18);
        --success-soft: rgba(46, 154, 168, 0.18);
        --success: #2e9aa8;
        --price: #4c86ff;
        --hero-accent: rgba(241, 193, 106, 0.45);
        --divider: rgba(47, 58, 73, 1);
        --cart-shadow: -24px 0 80px rgba(0, 0, 0, 0.6);
        --shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
        --header-bg: var(--surface-2);
        --hero-surface: linear-gradient(135deg, rgba(241, 193, 106, 0.08), rgba(32, 40, 52, 0.85));
      }

      [data-theme="light"] {
        color-scheme: light;
        --bg-0: #f6f1ff;
        --bg-1: #f2ecff;
        --surface-1: #ffffff;
        --surface-2: #f9f6ff;
        --surface-3: #f1ebff;
        --border: #d9ccff;
        --accent: #d86a55;
        --accent-pressed: #c35c4b;
        --text-primary: #161417;
        --text-secondary: #4a4451;
        --chip-bg: #ffffff;
        --chip-active: rgba(216, 106, 85, 0.12);
        --success-soft: rgba(46, 154, 168, 0.12);
        --success: #2e9aa8;
        --price: #4c86ff;
        --hero-accent: #d86a55;
        --divider: rgba(217, 204, 255, 0.75);
        --cart-shadow: -24px 0 80px rgba(76, 134, 255, 0.12);
        --shadow: 0 24px 60px rgba(76, 134, 255, 0.15);
        --header-bg: var(--surface-2);
        --hero-surface: linear-gradient(135deg, rgba(216, 106, 85, 0.08), rgba(249, 246, 255, 0.9));
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background: linear-gradient(180deg, var(--bg-0), var(--bg-1));
        color: var(--text-primary);
      }

      h1,
      h2,
      h3,
      h4,
      .font-jakarta {
        font-family: "Plus Jakarta Sans", sans-serif;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      .text-muted {
        color: var(--text-secondary);
      }

      .page {
        min-height: 100vh;
        padding-bottom: 120px;
        position: relative;
        overflow-x: hidden;
      }

      .glow {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: -1;
      }

      .glow::before,
      .glow::after {
        content: "";
        position: absolute;
        width: 60vw;
        height: 60vw;
        background: radial-gradient(circle, rgba(245, 158, 11, 0.2), transparent 65%);
        filter: blur(120px);
        opacity: 0.6;
      }

      .glow::after {
        right: -20%;
        bottom: -30%;
        background: radial-gradient(circle, rgba(45, 212, 191, 0.2), transparent 70%);
      }

      header {
        position: sticky;
        top: 0;
        z-index: 20;
        backdrop-filter: blur(24px);
        background: var(--header-bg);
        border-bottom: 1px solid var(--border);
      }

      .header-inner {
        max-width: 1100px;
        margin: 0 auto;
        padding: 16px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 20px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 800;
        letter-spacing: -0.03em;
      }

      .brand-badge {
        width: 40px;
        height: 40px;
        border-radius: 14px;
        background: linear-gradient(140deg, #d86a55, #b84f3f);
        display: grid;
        place-items: center;
        box-shadow: 0 12px 26px rgba(216, 106, 85, 0.3);
      }

      .brand span {
        font-size: 20px;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }

      .pill {
        padding: 8px 14px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--surface-3);
        color: var(--text-secondary);
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.2em;
      }

      .cart-btn {
        border: 1px solid var(--border);
        background: transparent;
        color: var(--text-secondary);
        padding: 10px 16px;
        border-radius: 14px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .theme-toggle {
        border: 1px solid var(--border);
        background: transparent;
        color: var(--text-secondary);
        padding: 10px 14px;
        border-radius: 14px;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .theme-toggle span {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: var(--text-secondary);
      }

      .secondary-btn {
        transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      }

      .secondary-btn:hover {
        background: rgba(76, 134, 255, 0.1);
      }

      [data-theme="light"] .secondary-btn:hover {
        background: rgba(76, 134, 255, 0.06);
      }

      .search {
        position: relative;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 0 12px;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--surface-3);
      }

      .search input {
        border: none;
        background: transparent;
        color: var(--text-primary);
        padding: 10px 0;
        min-width: 220px;
        font-size: 14px;
        outline: none;
      }

      .search input::placeholder {
        color: var(--text-secondary);
      }

      .search:focus-within {
        box-shadow: 0 0 0 2px rgba(76, 134, 255, 0.6);
      }

      .cart-count {
        background: #fcd34d;
        color: #111;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 700;
      }

      main {
        max-width: 1100px;
        margin: 0 auto;
        padding: 32px 24px 0;
        display: grid;
        gap: 40px;
      }

      .hero {
        display: grid;
        gap: 24px;
        padding: 28px;
        border-radius: 24px;
        background: var(--hero-surface);
        border: 1px solid rgba(216, 106, 85, 0.2);
        box-shadow: var(--shadow);
      }

      .hero h1 {
        font-size: clamp(2rem, 4vw, 3.2rem);
        margin: 0;
        font-family: "Fraunces", serif;
        font-weight: 700;
      }

      .hero-accent {
        color: var(--hero-accent);
      }

      .hero p {
        margin: 0;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .hero-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }

      .hero-card {
        background: var(--surface-1);
        border-radius: 18px;
        padding: 16px;
        border: 1px solid var(--border);
      }

      [data-theme="light"] .badge {
        color: var(--text-secondary);
        background: var(--chip-bg);
        border-color: var(--border);
      }

      [data-theme="light"] body {
        color: #0f172a;
      }

      [data-theme="light"] header {
        border-bottom: 1px solid rgba(15, 23, 42, 0.08);
      }

      [data-theme="light"] .hero-card {
        background: rgba(255, 255, 255, 0.85);
      }

      [data-theme="light"] .badge {
        color: #0ea5e9;
        background: rgba(14, 165, 233, 0.12);
        border-color: rgba(14, 165, 233, 0.3);
      }

      [data-theme="light"] .add-btn,
      [data-theme="light"] .cart-btn {
        color: #0f172a;
      }

      [data-theme="light"] .cart-panel {
        background: rgba(248, 250, 252, 0.98);
        box-shadow: -24px 0 80px rgba(15, 23, 42, 0.12);
      }

      [data-theme="light"] .qty-btn {
        color: #0f172a;
      }

      [data-theme="light"] .checkout-btn {
        color: #111;
      }

      .section-heading {
        display: flex;
        flex-direction: column;
        gap: 8px;
        align-items: center;
        text-align: center;
      }

      .section-heading h2,
      .section-label {
        margin: 0;
        font-size: 28px;
      }

      .section-heading span {
        font-size: 12px;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.22em;
      }

      .filter-select {
        background: var(--surface-3);
        border: 1px solid var(--border);
        color: var(--text-primary);
        padding: 10px 16px;
        border-radius: 999px;
        font-size: 14px;
        min-width: 220px;
        text-align: center;
        appearance: none;
      }

      .filter-select:focus {
        outline: 2px solid rgba(76, 134, 255, 0.6);
        outline-offset: 2px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 18px;
      }

      .menu-filters {
        display: flex;
        gap: 14px;
        flex-wrap: wrap;
        justify-content: center;
        padding: 8px 0 12px;
      }

      .filter-chip {
        padding: 8px 18px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--chip-bg);
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.18em;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .filter-chip.active {
        background: rgba(88, 80, 236, 0.22);
        border-color: rgba(88, 80, 236, 0.6);
        color: var(--text-primary);
        box-shadow: 0 12px 24px rgba(88, 80, 236, 0.15);
      }

      .carousel {
        position: relative;
        display: grid;
        align-items: center;
        grid-template-columns: auto 1fr auto;
        gap: 24px;
      }

      .carousel-btn {
        width: 86px;
        height: 86px;
        border-radius: 50%;
        border: 3px solid #facc15;
        background: rgba(24, 30, 39, 0.85);
        color: #f97316;
        font-size: 36px;
        display: grid;
        place-items: center;
        cursor: pointer;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
      }

      .carousel-card {
        display: grid;
        grid-template-columns: minmax(240px, 1.1fr) minmax(240px, 1fr);
        background: var(--surface-2);
        border-radius: 28px;
        overflow: hidden;
        border: 1px solid rgba(241, 193, 106, 0.18);
        box-shadow: var(--shadow);
      }

      .carousel-image {
        position: relative;
        min-height: 260px;
      }

      .carousel-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .carousel-badge {
        position: absolute;
        top: 20px;
        left: 20px;
        padding: 6px 14px;
        border-radius: 999px;
        border: 1px solid rgba(241, 193, 106, 0.4);
        background: rgba(18, 22, 28, 0.75);
        color: #f97316;
        text-transform: uppercase;
        letter-spacing: 0.3em;
        font-size: 10px;
        font-weight: 700;
      }

      .carousel-content {
        padding: 32px 32px 28px;
        display: grid;
        gap: 16px;
      }

      .carousel-category {
        text-transform: uppercase;
        letter-spacing: 0.35em;
        font-size: 10px;
        color: #f97316;
      }

      .carousel-title {
        font-family: "Fraunces", serif;
        font-size: clamp(1.8rem, 2.6vw, 2.6rem);
        margin: 0;
      }

      .carousel-desc {
        color: var(--text-secondary);
        font-size: 15px;
        line-height: 1.6;
      }

      .carousel-divider {
        height: 1px;
        background: var(--divider);
        opacity: 0.7;
      }

      .carousel-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }

      .carousel-price {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .carousel-price span {
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 10px;
        color: var(--text-secondary);
      }

      .carousel-price strong {
        font-size: 22px;
        color: var(--price);
      }

      .order-btn {
        background: var(--accent);
        border: none;
        color: #0e0f12;
        padding: 10px 24px;
        border-radius: 999px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 11px;
        cursor: pointer;
      }

      .carousel-dots {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 16px;
      }

      .carousel-dot {
        width: 18px;
        height: 4px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.16);
      }

      .carousel-dot.active {
        background: #f97316;
        width: 32px;
      }

      .card {
        background: var(--surface-1);
        border-radius: 20px;
        border: 1px solid rgba(217, 204, 255, 0.7);
        padding: 18px;
        display: grid;
        gap: 12px;
        min-height: 240px;
        box-shadow: 0 18px 40px rgba(20, 23, 28, 0.12);
      }

      [data-theme="dark"] .card {
        border: 1px solid var(--border);
        box-shadow: none;
        position: relative;
      }

      [data-theme="dark"] .card::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 20px;
        border: 1px solid rgba(241, 193, 106, 0.18);
        pointer-events: none;
      }

      .card h3 {
        margin: 0;
        font-size: 18px;
      }

      .card p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 13px;
        line-height: 1.5;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 11px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        background: var(--chip-bg);
        color: var(--text-secondary);
        border: 1px solid var(--border);
        width: fit-content;
      }

      .badge[data-active="true"] {
        background: var(--chip-active);
        border-color: var(--border);
      }

      .badge.integrity {
        background: var(--success-soft);
        color: var(--success);
        border-color: var(--success);
      }

      .price-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-top: auto;
      }

      .price {
        font-weight: 700;
        font-size: 16px;
        color: var(--price);
      }

      a,
      .linkish {
        color: var(--price);
      }

      a:hover,
      .linkish:hover {
        text-decoration: underline;
        text-shadow: 0 0 10px rgba(76, 134, 255, 0.3);
      }

      .add-btn {
        background: var(--accent);
        border: 1px solid var(--accent);
        color: #0e0f12;
        padding: 8px 12px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      }

      .add-btn:active {
        background: var(--accent-pressed);
        transform: translateY(1px);
      }

      .cart-panel {
        position: fixed;
        top: 0;
        right: 0;
        width: min(420px, 100%);
        height: 100vh;
        background: var(--surface-1);
        border-left: 1px solid var(--border);
        box-shadow: var(--cart-shadow);
        transform: translateX(110%);
        transition: transform 0.35s ease;
        display: grid;
        grid-template-rows: auto 1fr auto;
        padding: 24px;
        gap: 20px;
        z-index: 40;
      }

      .cart-panel.open {
        transform: translateX(0%);
      }

      .cart-item {
        border: 1px solid var(--border);
        background: var(--surface-1);
        padding: 12px;
        border-radius: 14px;
        display: grid;
        gap: 8px;
      }

      .cart-item h4 {
        margin: 0;
        font-size: 14px;
      }

      .cart-item small {
        color: var(--text-secondary);
      }

      .cart-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .qty-btn {
        background: transparent;
        color: var(--text-primary);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 4px 8px;
        cursor: pointer;
      }

      .totals {
        border-top: 1px solid var(--divider);
        padding-top: 16px;
        display: grid;
        gap: 8px;
        font-size: 14px;
      }

      .totals-row {
        display: flex;
        justify-content: space-between;
        color: var(--text-secondary);
      }

      .totals-row strong {
        color: var(--text-primary);
        font-size: 16px;
      }

      .checkout-btn {
        background: var(--accent);
        color: #0e0f12;
        font-weight: 700;
        border: none;
        border-radius: 12px;
        padding: 12px;
        cursor: pointer;
      }

      .checkout-btn:active {
        background: var(--accent-pressed);
      }

      .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.55);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 30;
      }

      .overlay.show {
        opacity: 1;
        pointer-events: auto;
      }

      @media (max-width: 900px) {
        .carousel {
          grid-template-columns: 1fr;
        }

        .carousel-btn {
          justify-self: center;
        }

        .carousel-card {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 720px) {
        .header-inner {
          flex-direction: column;
          align-items: flex-start;
        }

        .search input {
          min-width: 180px;
        }

        .carousel-content {
          padding: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="glow"></div>
      <header>
        <div class="header-inner">
          <div class="brand">
            <div class="brand-badge">‚òï</div>
            <span class="font-jakarta">Elite Cafe</span>
          </div>
          <div class="header-actions">
            <span class="pill">The North</span>
            <div class="search" role="search">
              <span aria-hidden="true">üîç</span>
              <input type="search" placeholder="Search the menu" aria-label="Search the menu" />
            </div>
            <button class="theme-toggle secondary-btn" id="theme-toggle" type="button" aria-pressed="false">
              üåó <span id="theme-label">Dark</span>
            </button>
            <button class="cart-btn secondary-btn" id="open-cart">
              Cart <span class="cart-count" id="cart-count">0</span>
            </button>
          </div>
        </div>
      </header>

      <main>
        <section>
          <div class="menu-filters" id="menu-filters"></div>
          <div class="carousel">
            <button class="carousel-btn" id="carousel-prev" aria-label="Previous item">‚Äπ</button>
            <div class="carousel-card" id="carousel-card"></div>
            <button class="carousel-btn" id="carousel-next" aria-label="Next item">‚Ä∫</button>
          </div>
          <div class="carousel-dots" id="carousel-dots"></div>
        </section>
      </main>
    </div>

    <div class="overlay" id="overlay"></div>
    <aside class="cart-panel" id="cart-panel">
      <div>
        <h3 class="font-jakarta">Your cart</h3>
        <p class="text-muted">Review your order and confirm pickup.</p>
      </div>
      <div id="cart-items"></div>
      <div>
        <div class="totals">
          <div class="totals-row"><span>Subtotal</span><span id="subtotal">$0.00</span></div>
          <div class="totals-row"><span>Service</span><span id="service-fee">$3.50</span></div>
          <div class="totals-row"><span>VAT (7%)</span><span id="vat">$0.00</span></div>
          <div class="totals-row">
            <strong>Total</strong>
            <strong id="total">$0.00</strong>
          </div>
        </div>
        <button class="checkout-btn" id="checkout-btn">Confirm order</button>
      </div>
    </aside>

    <script>
      const products = [
        {
          id: "pastry-almond",
          name: "Almond Croissant",
          price: 5.25,
          category: "Pastries",
          description:
            "Butter-flaked pastry filled with house-made almond frangipane and toasted slices.",
          badge: "Daily Bake",
          image:
            "https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=900&q=80",
        },
        {
          id: "coffee-latte",
          name: "Citrus Honey Latte",
          price: 4.75,
          category: "Coffee",
          description: "Silky espresso blended with orange zest, honey, and oat milk.",
          badge: "Barista Pick",
          image:
            "https://images.unsplash.com/photo-1481391319762-47dff72954d9?auto=format&fit=crop&w=900&q=80",
        },
        {
          id: "tea-chai",
          name: "Smoked Chai Tea",
          price: 3.95,
          category: "Tea",
          description: "Slow-brewed chai with toasted spices and vanilla cream.",
          badge: "Warm",
          image:
            "https://images.unsplash.com/photo-1504198458649-3128b932f49e?auto=format&fit=crop&w=900&q=80",
        },
        {
          id: "lunch-bowl",
          name: "Garden Grain Bowl",
          price: 9.9,
          category: "Lunch",
          description: "Herbed quinoa, citrus vinaigrette, and roasted vegetables.",
          badge: "Chef's Mix",
          image:
            "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=900&q=80",
        },
        {
          id: "dessert-tart",
          name: "Berry Cloud Tart",
          price: 6.4,
          category: "Desserts",
          description: "Yuzu custard, berry glaze, and flaky shortcrust base.",
          badge: "Limited",
          image:
            "https://images.unsplash.com/photo-1505253213348-ce7f8e0ff7ae?auto=format&fit=crop&w=900&q=80",
        },
      ];

      const state = {
        cart: JSON.parse(localStorage.getItem("elite_cart") || "{}"),
        activeSelection: "Coffee",
        carouselIndex: 0,
      };

      const menuFilters = document.getElementById("menu-filters");
      const carouselCard = document.getElementById("carousel-card");
      const carouselDots = document.getElementById("carousel-dots");
      const carouselPrev = document.getElementById("carousel-prev");
      const carouselNext = document.getElementById("carousel-next");
      const cartPanel = document.getElementById("cart-panel");
      const overlay = document.getElementById("overlay");
      const cartCount = document.getElementById("cart-count");
      const cartItems = document.getElementById("cart-items");
      const subtotalEl = document.getElementById("subtotal");
      const serviceFeeEl = document.getElementById("service-fee");
      const vatEl = document.getElementById("vat");
      const totalEl = document.getElementById("total");
      const themeToggle = document.getElementById("theme-toggle");
      const themeLabel = document.getElementById("theme-label");
      const serviceFee = 3.5;

      const currency = (value) => `$${value.toFixed(2)}`;

      const updateStorage = () => {
        localStorage.setItem("elite_cart", JSON.stringify(state.cart));
      };

      const setCartOpen = (open) => {
        cartPanel.classList.toggle("open", open);
        overlay.classList.toggle("show", open);
      };

      document.getElementById("open-cart").addEventListener("click", () => setCartOpen(true));
      overlay.addEventListener("click", () => setCartOpen(false));

      const renderFilters = () => {
        const selections = ["Coffee", "Tea", "Pastries", "Lunch", "Desserts"];
        menuFilters.innerHTML = selections
          .map(
            (selection) => `
              <button class="filter-chip ${selection === state.activeSelection ? "active" : ""}"
                type="button" data-filter="${selection}">
                ${selection}
              </button>
            `
          )
          .join("");
      };

      const getVisibleProducts = () =>
        products.filter((product) => product.category === state.activeSelection);

      const renderCarousel = () => {
        const visible = getVisibleProducts();
        if (!visible.length) return;
        const index = ((state.carouselIndex % visible.length) + visible.length) % visible.length;
        state.carouselIndex = index;
        const item = visible[index];
        carouselCard.innerHTML = `
          <div class="carousel-image">
            <img src="${item.image}" alt="${item.name}" />
            <div class="carousel-badge">${item.badge}</div>
          </div>
          <div class="carousel-content">
            <div class="carousel-category">${item.category}</div>
            <h2 class="carousel-title">${item.name}</h2>
            <p class="carousel-desc">${item.description}</p>
            <div class="carousel-divider"></div>
            <div class="carousel-footer">
              <div class="carousel-price">
                <span>Investment</span>
                <strong>${currency(item.price)}</strong>
              </div>
              <button class="order-btn" data-add="${item.id}">Add to order</button>
            </div>
          </div>
        `;

        carouselDots.innerHTML = visible
          .map(
            (_, dotIndex) =>
              `<span class="carousel-dot ${dotIndex === index ? "active" : ""}"></span>`
          )
          .join("");
      };

      const renderCart = () => {
        const items = Object.values(state.cart);
        cartCount.textContent = items.reduce((sum, item) => sum + item.qty, 0);
        cartItems.innerHTML = items.length
          ? items
              .map(
                (item) => `
                  <div class="cart-item">
                    <div>
                      <h4>${item.name}</h4>
                      <small>${currency(item.price)} each</small>
                    </div>
                    <div class="cart-actions">
                      <button class="qty-btn" data-qty="${item.id}" data-delta="-1">-</button>
                      <strong>${item.qty}</strong>
                      <button class="qty-btn" data-qty="${item.id}" data-delta="1">+</button>
                    </div>
                  </div>
                `
              )
              .join("")
          : `<p class="text-muted">Your cart is empty. Add something delicious.</p>`;

        const subtotal = items.reduce((sum, item) => sum + item.price * item.qty, 0);
        const vat = subtotal * 0.07;
        const total = subtotal + vat + (items.length ? serviceFee : 0);

        subtotalEl.textContent = currency(subtotal);
        vatEl.textContent = currency(vat);
        serviceFeeEl.textContent = items.length ? currency(serviceFee) : currency(0);
        totalEl.textContent = currency(total);
      };

      const applyTheme = (theme) => {
        document.documentElement.setAttribute("data-theme", theme);
        const isLight = theme === "light";
        themeToggle.setAttribute("aria-pressed", String(isLight));
        themeLabel.textContent = isLight ? "Light" : "Dark";
      };

      const storedTheme = localStorage.getItem("elite_theme");
      const initialTheme = storedTheme || "dark";
      applyTheme(initialTheme);

      themeToggle.addEventListener("click", () => {
        const nextTheme =
          document.documentElement.getAttribute("data-theme") === "light" ? "dark" : "light";
        localStorage.setItem("elite_theme", nextTheme);
        applyTheme(nextTheme);
      });

      const addToCart = (id) => {
        const product = products.find((p) => p.id === id);
        if (!product) return;
        state.cart[id] = state.cart[id] || { ...product, qty: 0 };
        state.cart[id].qty += 1;
        updateStorage();
        renderCart();
      };

      const updateQty = (id, delta) => {
        if (!state.cart[id]) return;
        state.cart[id].qty += delta;
        if (state.cart[id].qty <= 0) {
          delete state.cart[id];
        }
        updateStorage();
        renderCart();
      };

      document.addEventListener("click", (event) => {
        const addBtn = event.target.closest("[data-add]");
        if (addBtn) {
          addToCart(addBtn.dataset.add);
        }

        const qtyBtn = event.target.closest("[data-qty]");
        if (qtyBtn) {
          updateQty(qtyBtn.dataset.qty, Number(qtyBtn.dataset.delta));
        }
      });

      menuFilters.addEventListener("click", (event) => {
        const target = event.target.closest("[data-filter]");
        if (!target) return;
        state.activeSelection = target.dataset.filter;
        state.carouselIndex = 0;
        renderFilters();
        renderCarousel();
      });

      carouselPrev.addEventListener("click", () => {
        state.carouselIndex -= 1;
        renderCarousel();
      });

      carouselNext.addEventListener("click", () => {
        state.carouselIndex += 1;
        renderCarousel();
      });

      document.getElementById("checkout-btn").addEventListener("click", () => {
        if (!Object.keys(state.cart).length) return;
        alert("Order confirmed! We'll have it ready shortly.");
        state.cart = {};
        updateStorage();
        renderCart();
        setCartOpen(false);
      });

      renderFilters();
      renderCarousel();
      renderCart();
    </script>
  </body>
</html>
